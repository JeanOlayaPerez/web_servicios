/* Reset y base */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Outfit', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--fg);
  background: #0b1220;
  overflow: hidden; /* el scroll ocurre en #viewport */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

:root {
  --fg: #e7eefc;
  --muted: #a8b1c7;
  --accent: #78e3ff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.16);
  --btn-bg-hover: rgba(255,255,255,0.12);

  /* Espacio */
  --space-1: #0b1220; /* cénit */
  --space-2: #141d35;
  --space-3: #1c2a4d; /* horizonte */

  /* Cielo (día) */
  --sky-1: #b9e6ff;
  --sky-2: #7fc7ff;
  --sky-3: #3aa0ff;

  /* Montañas */
  --mtn-top: #a4b5c6;
  --mtn-base: #6c7d8f;

  /* Bosque */
  --forest-1: #d7f8e7;
  --forest-2: #98e1bf;
  --forest-3: #5bc098;
}

/* Modo noche (afecta cielos y contraste) */
.is-night {
  --fg: #dbe5ff;
  --muted: #9aa6c4;
  --accent: #ffce6b;
  --btn-bg: rgba(255,255,255,0.08);
  --btn-border: rgba(255,255,255,0.22);
  --btn-bg-hover: rgba(255,255,255,0.16);
  /* Espacio (noche más profunda) */
  --space-1: #050a16;
  --space-2: #0b1220;
  --space-3: #121a2e;
}

#viewport {
  height: 100svh; /* iOS-friendly */
  height: 100dvh;
  overflow-y: auto;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

.section {
  position: relative;
  min-height: 100svh;
  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: 72px 20px 48px;
  scroll-snap-align: start;
  isolation: isolate;
}

.section .bg { position: absolute; inset: 0; overflow: hidden; z-index: -1; }
.content { max-width: 920px; text-align: center; }

.title { font-size: clamp(28px, 5.6vw, 44px); line-height: 1.12; margin: 0 0 8px; }
.subtitle { color: var(--muted); margin: 0 0 20px; font-size: clamp(15px, 3.6vw, 18px); }
.accent { color: var(--accent); text-shadow: 0 0 24px color-mix(in oklab, var(--accent), transparent 70%); }

.actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
.btn { 
  display: inline-flex; align-items: center; justify-content: center;
  gap: 8px; padding: 12px 16px; border-radius: 14px; 
  color: var(--fg); text-decoration: none; font-weight: 600; 
  background: var(--btn-bg); border: 1px solid var(--btn-border);
  backdrop-filter: saturate(120%) blur(6px);
  transition: transform .15s ease, background .25s ease, border-color .25s ease;
}
.btn:hover { transform: translateY(-1px); background: var(--btn-bg-hover); }
.btn:active { transform: translateY(0); }
.btn.cta { background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent), white 20%)); color: #0a1020; border-color: transparent; }
.btn.ghost { background: transparent; }
.btn.small { padding: 8px 12px; font-size: 14px; }

/* UI fija */
.ui { position: fixed; inset: 0 0 auto 0; display: flex; justify-content: flex-end; gap: 8px; padding: env(safe-area-inset-top, 12px) 12px 0 12px; pointer-events: none; z-index: 50; }
.ui .btn { pointer-events: auto; }
.btn-toggle { width: 44px; height: 44px; border-radius: 12px; position: relative; }
.btn-toggle .icon { position: absolute; inset: 0; display: grid; place-items: center; transition: opacity .25s ease, transform .25s ease; }
.btn-toggle .sun { opacity: 1; }
.btn-toggle .moon { opacity: 0; transform: scale(.9) rotate(-12deg); }
.is-night .btn-toggle .sun { opacity: 0; transform: scale(.9) rotate(12deg); }
.is-night .btn-toggle .moon { opacity: 1; transform: scale(1) rotate(0); }

.nav-dots { position: fixed; right: 10px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 10px; z-index: 40; }
.nav-dots .dot { width: 10px; height: 10px; border-radius: 999px; background: rgba(255,255,255,.35); display: block; border: 2px solid rgba(255,255,255,.5); transition: transform .2s ease, background .2s ease; }
.nav-dots .dot:hover { transform: scale(1.2); }
.nav-dots .dot.active { background: var(--accent); border-color: color-mix(in oklab, var(--accent), #fff 20%); }
@media (max-width: 480px) { .nav-dots { right: 6px; } }

/* Fondos por sección */
.space {
  background:
    radial-gradient(140% 90% at 50% -10%, var(--space-2) 0%, var(--space-3) 60%, var(--space-1) 100%);
}
.is-night .space { filter: none; }

.sky {
  background: linear-gradient(180deg, var(--sky-1), var(--sky-2) 50%, var(--sky-3));
}
.is-night .sky {
  --sky-1: #2b3e66;
  --sky-2: #192a4a;
  --sky-3: #0f1b33;
}

.mountains {
  background: linear-gradient(180deg, #e9f3ff, #c2d7ee 40%, #9bb6d9 70%, #7da0cc);
}
.is-night .mountains { background: linear-gradient(180deg, #142033, #0f1b2b 50%, #0c1624 80%, #0a1220); }

.forest { background: linear-gradient(180deg, var(--forest-1), var(--forest-2) 50%, var(--forest-3)); }
.is-night .forest { --forest-1: #244a47; --forest-2: #1d3c39; --forest-3: #152e2c; }

/* Estrellas */
.stars { position: absolute; inset: -10% -10% 0 -10%; }
.stars span { position: absolute; display: block; background: radial-gradient(circle, #fff, rgba(255,255,255,.1)); border-radius: 50%; opacity: .75; animation: twinkle linear infinite; }
.is-night .stars span { opacity: .95; }
@keyframes twinkle { 0%,100%{ opacity:.6 } 50%{ opacity:1 } }

.planet {
  position: absolute; left: 50%; bottom: 12%; transform: translateX(-50%);
  width: min(54vw, 300px); height: min(54vw, 300px); border-radius: 50%;
  background: radial-gradient(120% 120% at 30% 30%, #ffe29a 0%, #ff8f8f 40%, #7a6bff 75%, #2e2b87 100%);
  box-shadow: 0 40px 120px rgba(122,107,255,.35), inset -18px -24px 40px rgba(0,0,0,.28);
  animation: floaty 6s ease-in-out infinite;
}
@keyframes floaty { 0%,100%{ transform: translate(-50%, 0) } 50%{ transform: translate(-50%, -8px) } }

/* Nubes */
.cloud { position: absolute; background: radial-gradient(closest-side, rgba(255,255,255,.95), rgba(255,255,255,.2)); filter: blur(0.4px);
  width: 48vw; height: 22vw; border-radius: 999px; animation: breeze linear infinite; }
.cloud.c1 { top: 15%; left: -20%; animation-duration: 36s; }
.cloud.c2 { top: 35%; left: 60%; animation-duration: 44s; }
.cloud.c3 { top: 60%; left: -10%; animation-duration: 52s; }
@keyframes breeze { 0% { transform: translateX(0) } 100% { transform: translateX(-30vw) } }

/* Montañas SVG */
.mountains-svg { position: absolute; inset: auto 0 0 0; width: 100%; height: 52%; }
.is-night { --mtn-top: #71839a; --mtn-base: #435369; }

/* Árboles */
.trees { position: absolute; inset: auto 0 0 0; height: 50%; display: grid; grid-auto-flow: column; align-items: end; justify-content: space-around; padding: 0 10%; }
.tree { width: 0; height: 0; border-left: 28px solid transparent; border-right: 28px solid transparent; border-bottom: 70px solid #2f6b56; filter: drop-shadow(0 8px 10px rgba(0,0,0,.25)); }
.tree::after { content:""; display:block; width: 20px; height: 18px; background:#2a5a49; transform: translate(-10px, 4px); }
.is-night .tree { border-bottom-color: #214b3e; }

/* Skills */
.skills { list-style: none; padding: 0; margin: 18px auto 0; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; max-width: 760px; }
.chip { padding: 10px 12px; background: var(--btn-bg); border: 1px solid var(--btn-border); border-radius: 999px; font-weight: 600; color: var(--fg);
  transition: transform .18s ease, background .25s ease; }
.chip:hover { transform: translateY(-2px); background: var(--btn-bg-hover); }

/* Proyectos */
.projects .cards { display: flex; gap: 16px; overflow-x: auto; padding: 4px; scroll-snap-type: x proximity; -webkit-overflow-scrolling: touch; }
.card { flex: 0 0 82%; max-width: 420px; background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.16); border-radius: 16px; padding: 14px; scroll-snap-align: start; backdrop-filter: blur(6px); }
.thumb { height: 140px; border-radius: 12px; background: linear-gradient(135deg, rgba(255,255,255,.2), rgba(255,255,255,.06)); margin-bottom: 10px; position: relative; overflow: hidden; }
.thumb::before { content:""; position:absolute; inset:-40% -40% auto auto; width:70%; height:180%; background: radial-gradient(circle at top left, rgba(255,255,255,.45), transparent 60%); transform: rotate(18deg); }
.card-title { margin: 8px 0 4px; font-size: 18px; }
.card-text { margin: 0 0 10px; color: var(--muted); }
.tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
.tags span { font-size: 12px; padding: 6px 8px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.18); }

/* Parallax suave por puntero usando data-depth */
[data-depth] { will-change: transform; transition: transform .12s ease; }

/* Accesibilidad: reducir movimiento */
@media (prefers-reduced-motion: reduce) {
  .planet, .cloud, .stars span, [data-depth] { animation: none !important; transition: none !important; }
  #viewport { scroll-behavior: auto; }
}
